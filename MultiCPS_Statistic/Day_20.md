## **시계열 데이터의 특징, 시계열 분해법, 자기상관**

### 시계열 자료의 개념

- 시간의 흐름에 따라 순차적으로 관찰된 자료들의 집합

### 시계열 자료의 예시

- 월별 소비자 물가지수, 일별 주가지수
- 일일 강수량, 일일 기온, 연간 지진의 발생 수
- 월별 상품판매량, 월별 상품재고량, 일별 상품매출액
- 월별 교통사고 건수, 월별 범죄발생 수

### 시계열 분석 종류

- 탐색적 시계열 분석
    - 평활법
    - 분해법
- 확률적 시계열 분석
    - AR(1) 모델
    - MA, ARMA, ARIMA…
        - ACF나 PACF를 보고 어떤 모형을 선택할 지 정함

### 이동 평균 평활법(Moving Average Smoothing)

- 가장 최근의 m-기간동안의 자료들의 단순 평균을 다음 기간의 예측값으로 추청
- $Z_n$을 시점 n에서의 실제값, $\hat Z_{n+1}$을 시점 n에서 추정한 시점 n+1의 에측값이라고 하면
$\hat Z_{n+1} = \dfrac 1 m (Z_n + Z_{n-1} + ... + Z_{n-m+1})$

### 지수평활법(Exponential Smoothing)

- 이동평균평활법과 같이 과거의 관측값을 활용하여 다음 기간의 값을 예측하지만 최근의 자료에 더 많은 가중치를 부여하는 방법임.
- $Z_n$을 시점 n에서의 실제값, $S_n$을 시점 n에서 지수평활 예측값($\hat Z_{n+1}$)이라고 하고, 평활상수 $\alpha$는 0~1 사이의 값이라고 할 때,
$S_n = \alpha Z_n + (1-\alpha)S_{n-1}$
$\leftrightarrow S_n = \alpha Z_n + \alpha(1-\alpha)Z_{n-1} + \alpha(1-\alpha)^2Z_{n-2} + ...$

### 분해법(추세요인, 계절요인)

- 추세요인 : 소득이 시간이 흐름에 따라 쭈욱 증가흐는 패턴등의 장기적인 변동요인
- 계절요인 : 12개월(1년)의 주기를 가지고 반복되는 변화등의 시간적인 주기를 가지는 변동요인
- 변동 요인의 분해과정
    - 원계열 $Z_t$에 추세선(예. 단순선형회귀)을 적합하여 추세성 $\hat T_t$을 추정. **트렌드** 추정
    $Z_t → \hat T_t = \hat \alpha + \hat \beta t$
    - 원계열 $Z_t$과 추세성 $\hat T_t$의 비율$\hat S_t$을 정의
    $\hat S_t = \dfrac {Z_t} {\hat T_t}$ → 트렌드가 실제 자료를 얼마나 반영하는지, season effect 추정
    - k번째 계절에 대한 계절지수 $\hat {SI}_k$는 **해당 계절**의 $\hat S_t$의 평균으로 구함. 계절 별 평균
- 예측
    - T 시점의 예측값 $\hat Z_T$는
    $\hat Z_T = (\hat \alpha + \hat \beta T)\hat {SI}_K$ ($\hat {SI}_K$: T 시점이 K번째 계절이라고 할 때의 계절지수)

### 정상 시계열 모형

- 정상성(stationarity)의 조건
    - 평균이 시점에 의존하지 않음
    - 분산이 시점에 의존하지 않음
    - 공분산은 단지 시차에만 의존하고, 시점 자체에는 의존하지 않음
    - → 자료의 확률적인 구조는 시간에 의존하지 않는다.
- 정상성 조건으로 하나라도 만족하지 못하는 시계열 자료를 비정상 시계열이라고 부르며, 비정상 시계열은 정상성을 만족하는 정상 시계열 자료로 만든 후 자기회귀(AR), 이동평균(MA), 자기회귀이동평균(ARMA) 모형을 적합하는 시계열 분석을 수행함
- 자기회귀(AR), 이동평균(MA) 모형의 식별을 위해 자기상관 및 부분자기상관함수의 형태를 이용함. 
AR은 자기 자신의 과거 값들에 의존하는 것이고, MA는 오차들의 과거값에 의존하는 것
    - 자기상관계수(autocorrelation, AC)
        
        일정한 간격으로 떨어진 두 시점에서의 시계열 자료 간의 선형적 연관성.
        
        ![Untitled](img/Untitled%2019.png)
        
        왼쪽이 원래 시계열이고 오른쪽이 한 시점간격으로 미룬 시계열이다. 이 두 개의 연관성을 비교, 자기자신을 몇 시점 미룬 애란 상관계수를 구함. 이걸 시점마다 다 구해서 ACF(autocorrelate function)를 만들 수 있음
        
    - 부분자기상관계수(partial autocorrelation, PAC)
        
        일정한 간격으로 떨어진 두 시점 사이의 상관관계 분석 시, **중간 시점의 영향을 제외**하고 측정하는 선형적 연관성.
        
    
    ![ACF에서 추세를 보이고, PACF에서 0수준의 값을 유지하면 AR(1)모델로 모델링함
    AR(1) 모델은 현재 자료값이 과거 1 시점의 자료에 의존하는 모델이다.](%5BProDS%5D%20%E1%84%90%E1%85%A9%E1%86%BC%E1%84%80%E1%85%A8%20%E1%84%8B%E1%85%B5%E1%84%85%E1%85%A9%E1%86%AB%20%E1%84%86%E1%85%B5%E1%86%BE%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%B5%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%AA%20c71775347ff84dc5bd040ff061abb336/Untitled%2020.png)
    
    ACF에서 추세를 보이고, PACF에서 0수준의 값을 유지하면 AR(1)모델로 모델링함
    AR(1) 모델은 현재 자료값이 과거 1 시점의 자료에 의존하는 모델이다.
    

### 자기회귀 과정(Autoregressive Model)

- AR(1) 모델
$Y_t = \beta_0 + \beta_1Y_{t-1} + \epsilon$
- AR(1) 모델 적용 사례
    
    ![Untitled](img/Untitled%2021.png)